(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{229:function(a,e,t){"use strict";t(74);var o=t(61);e.a=Object(o.a)("flex")},246:function(a,e,t){"use strict";t.r(e);var o=t(14),n=t.n(o),i={name:"Personal",mounted:function(){this.listardepartamentos(),this.getselects()},data:function(){return{dialog:!1,depa:"",bienvenida:!0,ocultar:!1,showdata:"",valid:!1,valid1:!1,b:!0,personal:[],equipostable:[],mostrarexplorar:!1,imageName:"",loading:!1,ocultarbuscador:!1,loading1:!1,selection:1,rules:[function(a){return!!a||"campo requerido."}],file:[function(a){return!a||a.size<2e6||"Su imagen de perfil no pude ser mayor 2 MB!"}],asignaciones:[],departamentos:[],paginate:{total:0,current_page:0,per_page:0,last_page:0,from:0,to:0},data:{id:"",nombre:"",apellido:"",cedula:"",telefono:"",avatar:"",asignacion:"",departamento:""},datafiltro:""}},methods:{pickFile:function(){this.$refs.image.click()},getselects:function(){var a=this;axios.get("/api/get-asignaciones").then((function(e){a.asignaciones=e.data}))},obtenerimagen:function(a){var e=a.target.files[0];this.data.avatar=e,this.imageName=e.name,this.cargarimagen(e)},cargarimagen:function(a){var e=this,t=new FileReader;t.onload=function(a){e.data.avatar=a.target.result},t.readAsDataURL(a)},mostrarmodal:function(a){this.dialog=!0,this.data.id=a.id_empleado,this.data.nombre=a.nombre,this.data.apellido=a.apellido,this.data.cedula=a.cedula,this.data.telefono=a.telefono,this.imageName=a.avatar,this.data.asignacion=a.asignacion_id,this.data.departamento=a.departamento_id},actualizar:function(){var a=this;this.loading1=!0,axios.put("/api/personal/update/"+this.data.id,this.data).then((function(e){!0===e.data&&(a.loading1=!1,a.dialog=!1,n.a.fire({position:"center",icon:"success",title:"Actualizacion completada",showConfirmButton:!1}),a.listar(a.paginate.current_page))})).catch((function(a){a.response?(console.log(a.response.data),console.log(a.response.status),console.log(a.response.headers)):a.request?console.log(a.request):console.log("Error",a.message)}))},buscar:function(){this.$refs.bus.validate()&&(this.ocultarbuscador=!1,this.listar())},listar:function(a){var e=this;if(this.loading=!0,null!==this.depa){this.datafiltro=null;var t="/api/listado/"+this.depa+"?page="+a}else t="/api/listado/"+this.data.departamento+"?page="+a;this.bienvenida=!1,axios.get(t).then((function(a){a.data.personal.length>0?(e.personal=a.data.personal,e.paginate=a.data.paginate,e.loading=!1,e.ocultar=!1):(e.personal=[],e.loading=!1,e.ocultar=!0)})).catch((function(a){e.loading=!1,a.response?(console.log(a.response.data),console.log(a.response.status),console.log(a.response.headers)):a.request?console.log(a.request):console.log("Error",a.message)}))},Chagepage:function(a){this.paginate.current_page=a,this.listar(a)},ver:function(a){axios.get("/api/equipos/show/"+a).then((function(a){console.log(a.data)}))},eliminar:function(a){var e=this;n.a.fire({title:"ADVERTENCIA!!",text:"Â¿ Esta seguro que Desea eliminar ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si Eliminar!"}).then((function(t){t.value&&axios.delete("/api/personal/delete/"+a).then((function(a){e.listar(e.current_page),n.a.fire("eliminado","se ah eliminado con exito.","success")})).catch((function(a){a.response?(console.log(a.response.data),console.log(a.response.status),console.log(a.response.headers)):a.request?console.log(a.request):console.log("Error",a.message)}))}))},listardepartamentos:function(){var a=this;axios.get("/api/get-departamentos").then((function(e){a.departamentos=e.data})).catch((function(a){a.response?(console.log(a.response.data),console.log(a.response.status),console.log(a.response.headers)):a.request?console.log(a.request):console.log("Error",a.message)}))},buscarfiltro:function(){var a=this;this.$refs.filtro.validate()&&(this.loading=!0,this.b=!1,axios.get("/api/filtro/empleados/"+this.datafiltro).then((function(e){e.data.empleado.length>0?(a.personal=e.data.empleado,a.paginate=e.data.paginate,a.b=!0,a.loading=!1,a.personal.length>0?(a.ocultarbuscador=!1,a.bienvenida=!1,a.ocultar=!1):(a.ocultarbuscador=!0,a.ocultar=!1)):(a.ocultarbuscador=!0,a.loading=!1)})).catch((function(e){a.b=!1,a.loading=!1,e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message)})))}},computed:{}},s=t(9),l=t(10),r=t.n(l),c=t(233),d=t(56),u=t(76),p=t(1),v=t(226),m=t(228),g=t(238),f=t(78),h=t(229),b=t(236),_=t(72),x=t(73),k=t(235),C=t(232),w=t(239),V=t(268),q=t(24),y=Object(s.a)(i,(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("v-card",{staticClass:"mx-auto",attrs:{loading:a.loading,"max-width":"100%",raised:""}},[t("v-container",[t("v-container",[t("v-row",[t("v-col",[t("v-card-title",[t("v-icon",{attrs:{color:"nav"}},[a._v("mdi-account-star")]),a._v("Listado de Personal")],1)],1),a._v(" "),t("v-col",[t("v-form",{ref:"filtro"},[t("v-text-field",{attrs:{label:"Buscar","append-icon":a.b?"mdi-magnify":"mdi-restart",rules:a.rules,hint:a.ocultarbuscador?"no hubo resultados en la busqueda verifique sus datos por favor":"Busqueda de personal",error:a.ocultarbuscador},on:{"click:append":a.buscarfiltro},model:{value:a.datafiltro,callback:function(e){a.datafiltro=e},expression:"datafiltro"}})],1)],1)],1)],1),a._v(" "),[t("v-row",{attrs:{justify:"center"}},[t("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:a.dialog,callback:function(e){a.dialog=e},expression:"dialog"}},[t("v-card",{staticClass:"mx-auto my-12",attrs:{loading:a.loading1,"max-width":"100%",raised:""}},[t("v-card-title",[a._v(" Actualizar los datos ")]),a._v(" "),t("v-card-text",[t("v-form",{ref:"form",model:{value:a.valid1,callback:function(e){a.valid1=e},expression:"valid1"}},[t("v-row",{staticClass:"mx-0",attrs:{align:"center"}},[t("v-col",[t("v-text-field",{attrs:{label:"Nombre","prepend-icon":"mdi-human-male",rules:a.rules,hint:"Nombre"},model:{value:a.data.nombre,callback:function(e){a.$set(a.data,"nombre",e)},expression:"data.nombre"}})],1),a._v(" "),t("v-col",[t("v-text-field",{attrs:{label:"Apellido","prepend-icon":"mdi-human-handsdown",rules:a.rules,hint:"Apellido"},model:{value:a.data.apellido,callback:function(e){a.$set(a.data,"apellido",e)},expression:"data.apellido"}})],1)],1),a._v(" "),t("v-row",{staticClass:"mx-0",attrs:{align:"center"}},[t("v-col",[t("v-text-field",{attrs:{label:"Cedula","prepend-icon":"mdi-contacts",rules:a.rules,hint:" cedula de identidad"},model:{value:a.data.cedula,callback:function(e){a.$set(a.data,"cedula",e)},expression:"data.cedula"}})],1),a._v(" "),t("v-col",[t("v-text-field",{attrs:{"prepend-icon":"mdi-phone",label:"Telefono",rules:a.rules,hint:" numero telefonico"},model:{value:a.data.telefono,callback:function(e){a.$set(a.data,"telefono",e)},expression:"data.telefono"}})],1)],1),a._v(" "),t("v-row",[t("v-col",[t("v-text-field",{attrs:{accept:"image/png, image/jpeg, image/bmp",placeholder:"imagen de perfil","prepend-icon":"mdi-camera",label:"Avatar"},on:{click:a.pickFile},model:{value:a.imageName,callback:function(e){a.imageName=e},expression:"imageName"}}),a._v(" "),t("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",rules:a.file,accept:"image/*"},on:{change:a.obtenerimagen}})],1),a._v(" "),t("v-col",[t("v-select",{attrs:{items:a.asignaciones,"item-text":"asignacion","item-key":"asignacion.id","prepend-icon":"mdi-shopping","item-value":"id",label:"selecione un cargo"},model:{value:a.data.asignacion,callback:function(e){a.$set(a.data,"asignacion",e)},expression:"data.asignacion"}})],1)],1),a._v(" "),t("v-row",[t("v-col",[t("v-select",{attrs:{items:a.departamentos,"item-text":"departamento","item-key":"departamento.id","prepend-icon":"mdi-domain","item-value":"id",label:"seleccione un departamento"},model:{value:a.data.departamento,callback:function(e){a.$set(a.data,"departamento",e)},expression:"data.departamento"}})],1)],1),a._v(" "),t("v-card-actions",[t("v-spacer"),a._v(" "),t("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){a.dialog=!1}}},[a._v("Close")]),a._v(" "),t("v-btn",{attrs:{color:"blue darken-1",disabled:!a.valid1,text:""},on:{click:a.actualizar}},[a._v("Save")])],1)],1)],1),a._v(" "),t("v-divider",{staticClass:"mx-4"})],1)],1)],1)],a._v(" "),t("v-container",[t("v-form",{ref:"bus"},[t("v-row",{attrs:{align:"center"}},[t("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[t("v-select",{attrs:{items:a.departamentos,"item-text":"departamento","item-key":"id",rules:a.rules,"prepend-icon":"mdi-domain","item-value":"id",label:"seleccione un departamento"},model:{value:a.depa,callback:function(e){a.depa=e},expression:"depa"}})],1),a._v(" "),t("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[t("v-btn",{attrs:{color:"blue"},on:{click:a.buscar}},[t("v-icon",[a._v("mdi-account-search")])],1)],1)],1)],1)],1),a._v(" "),t("v-container",[a.personal.length>0?[t("v-row",{attrs:{dense:""}},a._l(a.personal,(function(e){return t("v-col",{key:e.id},[t("v-flex",[t("v-card",{staticClass:"d-flex flex-wrap",attrs:{"max-width":"300",outlined:"",shaped:""}},[t("v-img",{staticClass:"dark--text align-end",attrs:{height:"220px",src:"/img/avatares/"+e.avatar}}),a._v(" "),t("v-card-subtitle",{staticClass:"pb-0"}),a._v(" "),t("v-card-text",{staticClass:"text--primary"},[t("div",[a._v(" Cargo: "+a._s(e.asignacion))]),a._v(" "),t("div",[a._v(" Departamento: "+a._s(e.departamento))]),a._v(" "),t("div",[a._v("Nombre: "+a._s(e.nombre))]),a._v(" "),t("div",[a._v("Apellido: "+a._s(e.apellido))]),a._v(" "),t("div",[a._v("Cedula: "+a._s(e.cedula))]),a._v(" "),t("div",[a._v("Telefono: "+a._s(e.telefono))])]),a._v(" "),t("v-card-actions",[t("v-btn",{attrs:{color:"blue",text:""}},[t("router-link",{attrs:{to:{name:"asignarequipos",params:{id:e.id_empleado,nombre:e.nombre,departamento:e.departamento_id}},tag:"span"}},[t("v-icon",[a._v("mdi-desktop-classic")])],1)],1),a._v(" "),t("v-btn",{attrs:{color:"warning",text:""},on:{click:function(t){return a.mostrarmodal(e)}}},[t("v-icon",[a._v("mdi-account-edit")])],1),a._v(" "),t("v-btn",{attrs:{color:"red",text:""},on:{click:function(t){return a.eliminar(e.id_empleado)}}},[t("v-icon",[a._v("mdi-account-remove")])],1)],1)],1)],1)],1)})),1)]:a._e()],2),a._v(" "),a.personal.length>0?[t("div",{staticClass:"text-center"},[t("v-container",[t("v-row",{attrs:{justify:"center"}},[t("v-col",{attrs:{cols:"8"}},[t("v-container",{staticClass:"max-width"},[t("v-pagination",{staticClass:"my-4",attrs:{length:a.paginate.last_page},on:{input:function(e){return a.Chagepage(a.paginate.current_page)}},model:{value:a.paginate.current_page,callback:function(e){a.$set(a.paginate,"current_page",e)},expression:"paginate.current_page"}})],1)],1)],1)],1)],1)]:a._e(),a._v(" "),!0===a.ocultar?[t("v-container",[t("v-alert",{attrs:{outlined:"",type:"warning",prominent:"",border:"left"}},[a._v("\n     \t\t\t\t\tNo hay empleados registrados en este departamento!\n   \t\t\t ")])],1)]:a._e(),a._v(" "),!0===a.bienvenida?[t("v-container",[t("v-alert",{attrs:{color:"#2A3B4D",icon:"mdi-human-greeting",outlined:""}},[a._v("\n      \t\t\tBienvenido al modulo de Administracion de Personal, Debe seleccionar un departamento Para Facilitar La busqueda y control del Personal.!\n            ")])],1)]:a._e()],2)],1)],1)}),[],!1,null,null,null);e.default=y.exports;r()(y,{VAlert:c.a,VBtn:d.a,VCard:u.a,VCardActions:p.a,VCardSubtitle:p.b,VCardText:p.c,VCardTitle:p.d,VCol:v.a,VContainer:m.a,VDialog:g.a,VDivider:f.a,VFlex:h.a,VForm:b.a,VIcon:_.a,VImg:x.a,VPagination:k.a,VRow:C.a,VSelect:w.a,VSpacer:V.a,VTextField:q.a})}}]);